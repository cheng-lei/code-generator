(function(e){e.fn.extend({slimScroll:function(g){var a=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},g);this.each(function(){function v(c){if(r){c=c||window.event;var d=0;c.wheelDelta&&(d=-c.wheelDelta/120);c.detail&&(d=c.detail/3);e(c.target||c.srcTarget||c.srcElement).closest("."+a.wrapperClass).is(b.parent())&&k(d,!0);c.preventDefault&&!l&&c.preventDefault();l||(c.returnValue=!1)}}function k(c,e,g){l=!1;var f=c,h=b.outerHeight()-d.outerHeight();e&&(f=parseInt(d.css("top"))+c*parseInt(a.wheelStep)/100*d.outerHeight(),f=Math.min(Math.max(f,0),h),f=0<c?Math.ceil(f):Math.floor(f),d.css({top:f+"px"}));m=parseInt(d.css("top"))/(b.outerHeight()-d.outerHeight());f=m*(b[0].scrollHeight-b.outerHeight());g&&(f=c,c=f/b[0].scrollHeight*b.outerHeight(),c=Math.min(Math.max(c,0),h),d.css({top:c+"px"}));b.scrollTop(f);b.trigger("slimscrolling",~~f);w();x()}function D(){window.addEventListener?(this.addEventListener("DOMMouseScroll",v,!1),this.addEventListener("mousewheel",v,!1)):document.attachEvent("onmousewheel",v)}function y(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),30);d.css({height:u+"px"});var c=u==b.outerHeight()?"none":"block";d.css({display:c})}function w(){y();clearTimeout(B);m==~~m?(l=a.allowPageScroll,C!=m&&b.trigger("slimscroll",0==~~m?"top":"bottom")):l=!1;C=m;u>=b.outerHeight()?l=!0:(d.stop(!0,!0).fadeIn("fast"),a.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function x(){a.alwaysVisible||(B=setTimeout(function(){a.disableFadeOut&&r||z||A||(d.fadeOut("slow"),h.fadeOut("slow"))},500))}var r,z,A,B,n,u,m,C,l=!1,b=e(this);if(b.parent().hasClass(a.wrapperClass)){var p=b.scrollTop(),d=b.parent().find("."+a.barClass),h=b.parent().find("."+a.railClass);y();if(e.isPlainObject(g)){if("height"in g&&"auto"==g.height){b.parent().css("height","auto");b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",q);b.css("height",q)}if("scrollTo"in g)p=parseInt(a.scrollTo);else if("scrollBy"in g)p+=parseInt(a.scrollBy);else if("destroy"in g){d.remove();h.remove();b.unwrap();return}k(p,!1,!0)}}else if(!(e.isPlainObject(g)&&"destroy"in g)){a.height="auto"==a.height?b.parent().height():a.height;p=e("\x3cdiv\x3e\x3c/div\x3e").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height,"-ms-touch-action":"none"});var h=e("\x3cdiv\x3e\x3c/div\x3e").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),d=e("\x3cdiv\x3e\x3c/div\x3e").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?{right:a.distance}:{left:a.distance};h.css(q);d.css(q);b.wrap(p);b.parent().append(d);b.parent().append(h);a.railDraggable&&d.bind("mousedown",function(c){var a=e(document);A=!0;t=parseFloat(d.css("top"));pageY=c.pageY;a.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;d.css("top",currTop);k(0,d.position().top,!1)});a.bind("mouseup.slimscroll",function(c){A=!1;x();a.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});e(".sidebar-mini.sidebar-collapse .sidebar-menu \x3e li").hover(function(a){d.fadeOut("fast");h.fadeOut("fast");e(".mipSlimScrollDiv").css("overflow","");e(".mipSlimScrollDiv\x3e.sidebar-menu").css("overflow","visible");a.stopPropagation()},function(a){w();e(".mipSlimScrollDiv\x3e.sidebar-menu").css("overflow","hidden");e(".mipSlimScrollDiv").css("overflow","hidden");a.stopPropagation()});h.hover(function(){w()},function(){x()});d.hover(function(){z=!0},function(){z=!1});b.hover(function(){r=!0},function(){r=!1});window.navigator.msPointerEnabled?(b.bind("MSPointerDown",function(a,b){a.originalEvent.targetTouches.length&&(n=a.originalEvent.targetTouches[0].pageY)}),b.bind("MSPointerMove",function(c){c.originalEvent.preventDefault();c.originalEvent.targetTouches.length&&(k((n-c.originalEvent.targetTouches[0].pageY)/a.touchScrollStep,!0),n=c.originalEvent.targetTouches[0].pageY)})):(b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(n=a.originalEvent.touches[0].pageY)}),b.bind("touchmove",function(b){l||b.originalEvent.preventDefault();b.originalEvent.touches.length&&(k((n-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),n=b.originalEvent.touches[0].pageY)}));y();"bottom"===a.start?(d.css({top:b.outerHeight()-d.outerHeight()}),k(0,!0)):"top"!==a.start&&(k(e(a.start).position().top,null,!0),a.alwaysVisible||d.hide());D()}});return this}});e.fn.extend({slimscroll:e.fn.slimScroll})})(jQuery);