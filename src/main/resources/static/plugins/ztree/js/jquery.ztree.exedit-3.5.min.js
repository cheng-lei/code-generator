(function(A){var M={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},B={onHoverOverNode:function(b,a){var c=p.getSetting(b.data.treeId),d=p.getRoot(c);if(d.curHoverNode!=a)B.onHoverOutNode(b);d.curHoverNode=a;e.addHoverDom(c,a)},onHoverOutNode:function(b,a){var c=p.getSetting(b.data.treeId),d=p.getRoot(c);d.curHoverNode&&!p.isSelectedNode(c,d.curHoverNode)&&(e.removeTreeDom(c,d.curHoverNode),d.curHoverNode=null)},onMousedownNode:function(b,a){function c(b){if(0==G.dragFlag&&Math.abs(R-b.clientX)<f.edit.drag.minMoveSize&&Math.abs(S-b.clientY)<f.edit.drag.minMoveSize)return!0;var a,c,q,m,k;k=f.data.key.children;Q.css("cursor","pointer");if(0==G.dragFlag){if(0==g.apply(f.callback.beforeDrag,[f.treeId,n],!0))return v(b),!0;a=0;for(c=n.length;a<c;a++)0==a&&(G.dragNodeShowBefore=[]),q=n[a],q.isParent&&q.open?(e.expandCollapseNode(f,q,!q.open),G.dragNodeShowBefore[q.tId]=!0):G.dragNodeShowBefore[q.tId]=!1;G.dragFlag=1;x.showHoverDom=!1;g.showIfameMask(f,!0);q=!0;m=-1;if(1<n.length){var l=n[0].parentTId?n[0].getParentNode()[k]:p.getNodes(f);k=[];a=0;for(c=l.length;a<c;a++)if(void 0!==G.dragNodeShowBefore[l[a].tId]&&(q&&-1<m&&m+1!==a&&(q=!1),k.push(l[a]),m=a),n.length===k.length){n=k;break}}q&&(L=n[0].getPreNode(),V=n[n.length-1].getNextNode());H=r("\x3cul class\x3d'zTreeDragUL'\x3e\x3c/ul\x3e",f);a=0;for(c=n.length;a<c;a++)q=n[a],q.editNameFlag=!1,e.selectNode(f,q,0<a),e.removeTreeDom(f,q),a>f.edit.drag.maxShowNodeNum-1||(m=r("\x3cli id\x3d'"+q.tId+"_tmp'\x3e\x3c/li\x3e",f),m.append(r(q,d.id.A,f).clone()),m.css("padding","0"),m.children("#"+q.tId+d.id.A).removeClass(d.node.CURSELECTED),H.append(m),a==f.edit.drag.maxShowNodeNum-1&&(m=r("\x3cli id\x3d'"+q.tId+"_moretmp'\x3e\x3ca\x3e  ...  \x3c/a\x3e\x3c/li\x3e",f),H.append(m)));H.attr("id",n[0].tId+d.id.UL+"_tmp");H.addClass(f.treeObj.attr("class"));H.appendTo(Q);F=r("\x3cspan class\x3d'tmpzTreeMove_arrow'\x3e\x3c/span\x3e",f);F.attr("id","zTreeMove_arrow_tmp");F.appendTo(Q);f.treeObj.trigger(d.event.DRAG,[b,f.treeId,n])}if(1==G.dragFlag){w&&F.attr("id")==b.target.id&&y&&b.clientX+J.scrollLeft()+2>A("#"+y+d.id.A,w).offset().left?(q=A("#"+y+d.id.A,w),b.target=0<q.length?q.get(0):b.target):w&&(w.removeClass(d.node.TMPTARGET_TREE),y&&A("#"+y+d.id.A,w).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_INNER));y=w=null;N=!1;h=f;q=p.getSettings();for(var C in q)q[C].treeId&&q[C].edit.enable&&q[C].treeId!=f.treeId&&(b.target.id==q[C].treeId||0<A(b.target).parents("#"+q[C].treeId).length)&&(N=!0,h=q[C]);C=J.scrollTop();m=J.scrollLeft();k=h.treeObj.offset();a=h.treeObj.get(0).scrollHeight;q=h.treeObj.get(0).scrollWidth;c=b.clientY+C-k.top;var t=h.treeObj.height()+k.top-b.clientY-C,u=b.clientX+m-k.left,B=h.treeObj.width()+k.left-b.clientX-m;k=c<f.edit.drag.borderMax&&c>f.edit.drag.borderMin;var l=t<f.edit.drag.borderMax&&t>f.edit.drag.borderMin,O=u<f.edit.drag.borderMax&&u>f.edit.drag.borderMin,K=B<f.edit.drag.borderMax&&B>f.edit.drag.borderMin,t=c>f.edit.drag.borderMin&&t>f.edit.drag.borderMin&&u>f.edit.drag.borderMin&&B>f.edit.drag.borderMin,u=k&&0>=h.treeObj.scrollTop(),B=l&&h.treeObj.scrollTop()+h.treeObj.height()+10>=a,T=O&&0>=h.treeObj.scrollLeft(),U=K&&h.treeObj.scrollLeft()+h.treeObj.width()+10>=q;if(b.target&&g.isChildOrSelf(b.target,h.treeId)){for(var I=b.target;I&&I.tagName&&!g.eqs(I.tagName,"li")&&I.id!=h.treeId;)I=I.parentNode;var W=!0;a=0;for(c=n.length;a<c;a++)if(q=n[a],I.id===q.tId){W=!1;break}else if(0<r(q,f).find("#"+I.id).length){W=!1;break}W&&b.target&&g.isChildOrSelf(b.target,I.id+d.id.A)&&(w=A(I),y=I.id)}q=n[0];t&&g.isChildOrSelf(b.target,h.treeId)&&(!w&&(b.target.id==h.treeId||u||B||T||U)&&(N||!N&&q.parentTId)&&(w=h.treeObj),k?h.treeObj.scrollTop(h.treeObj.scrollTop()-10):l&&h.treeObj.scrollTop(h.treeObj.scrollTop()+10),O?h.treeObj.scrollLeft(h.treeObj.scrollLeft()-10):K&&h.treeObj.scrollLeft(h.treeObj.scrollLeft()+10),w&&w!=h.treeObj&&w.offset().left<h.treeObj.offset().left&&h.treeObj.scrollLeft(h.treeObj.scrollLeft()+w.offset().left-h.treeObj.offset().left));H.css({top:b.clientY+C+3+"px",left:b.clientX+m+3+"px"});k=a=0;if(w&&w.attr("id")!=h.treeId){var D=null==y?null:p.getNodeCache(h,y);c=(b.ctrlKey||b.metaKey)&&f.edit.drag.isMove&&f.edit.drag.isCopy||!f.edit.drag.isMove&&f.edit.drag.isCopy;a=!(!L||y!==L.tId);k=!(!V||y!==V.tId);m=q.parentTId&&q.parentTId==y;q=(c||!k)&&g.apply(h.edit.drag.prev,[h.treeId,n,D],!!h.edit.drag.prev);a=(c||!a)&&g.apply(h.edit.drag.next,[h.treeId,n,D],!!h.edit.drag.next);K=(c||!m)&&!(h.data.keep.leaf&&!D.isParent)&&g.apply(h.edit.drag.inner,[h.treeId,n,D],!!h.edit.drag.inner);if(q||a||K){c=A("#"+y+d.id.A,w);k=D.isLastNode?null:A("#"+D.getNextNode().tId+d.id.A,w.next());l=c.offset().top;m=c.offset().left;O=q?K?.25:a?.5:1:-1;K=a?K?.75:q?.5:0:-1;C=(b.clientY+C-l)/c.height();(1==O||C<=O&&-.2<=C)&&q?(a=1-F.width(),k=l-F.height()/2,z=d.move.TYPE_PREV):(0==K||C>=K&&1.2>=C)&&a?(a=1-F.width(),k=null==k||D.isParent&&D.open?l+c.height()-F.height()/2:k.offset().top-F.height()/2,z=d.move.TYPE_NEXT):(a=5-F.width(),k=l,z=d.move.TYPE_INNER);F.css({display:"block",top:k+"px",left:m+a+"px"});c.addClass(d.node.TMPTARGET_NODE+"_"+z);if(X!=y||Y!=z)P=(new Date).getTime();D&&D.isParent&&z==d.move.TYPE_INNER&&(C=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==D.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===D.tId&&(C=!1),C&&(window.zTreeMoveTimer=setTimeout(function(){z==d.move.TYPE_INNER&&D&&D.isParent&&!D.open&&(new Date).getTime()-P>h.edit.drag.autoOpenTime&&g.apply(h.callback.beforeDragOpen,[h.treeId,D],!0)&&(e.switchNode(h,D),h.edit.drag.autoExpandTrigger&&h.treeObj.trigger(d.event.EXPAND,[h.treeId,D]))},h.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=D.tId))}else w=null,y="",z=d.move.TYPE_INNER,F.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else z=d.move.TYPE_INNER,w&&g.apply(h.edit.drag.inner,[h.treeId,n,null],!!h.edit.drag.inner)?w.addClass(d.node.TMPTARGET_TREE):w=null,F.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);X=y;Y=z;f.treeObj.trigger(d.event.DRAGMOVE,[b,f.treeId,n])}return!1}function v(b){window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);Y=X=null;J.unbind("mousemove",c);J.unbind("mouseup",v);J.unbind("selectstart",m);Q.css("cursor","auto");w&&(w.removeClass(d.node.TMPTARGET_TREE),y&&A("#"+y+d.id.A,w).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_INNER));g.showIfameMask(f,!1);x.showHoverDom=!0;if(0!=G.dragFlag){G.dragFlag=0;var a,k,l;a=0;for(k=n.length;a<k;a++)l=n[a],l.isParent&&G.dragNodeShowBefore[l.tId]&&!l.open&&(e.expandCollapseNode(f,l,!l.open),delete G.dragNodeShowBefore[l.tId]);H&&H.remove();F&&F.remove();var t=(b.ctrlKey||b.metaKey)&&f.edit.drag.isMove&&f.edit.drag.isCopy||!f.edit.drag.isMove&&f.edit.drag.isCopy;!t&&w&&y&&n[0].parentTId&&y==n[0].parentTId&&z==d.move.TYPE_INNER&&(w=null);if(w){a=function(){if(N){if(!t)for(var a=0,c=n.length;a<c;a++)e.removeNode(f,n[a]);if(z==d.move.TYPE_INNER)e.addNodes(h,u,E);else if(e.addNodes(h,u.getParentNode(),E),z==d.move.TYPE_PREV)for(a=0,c=E.length;a<c;a++)e.moveNode(h,u,E[a],z,!1);else for(a=-1,c=E.length-1;a<c;c--)e.moveNode(h,u,E[c],z,!1)}else if(t&&z==d.move.TYPE_INNER)e.addNodes(h,u,E);else if(t&&e.addNodes(h,u.getParentNode(),E),z!=d.move.TYPE_NEXT)for(a=0,c=E.length;a<c;a++)e.moveNode(h,u,E[a],z,!1);else for(a=-1,c=E.length-1;a<c;c--)e.moveNode(h,u,E[c],z,!1);e.selectNodes(h,E);r(E[0],f).focus().blur();f.treeObj.trigger(d.event.DROP,[b,h.treeId,E,u,z,t])};var u=null==y?null:p.getNodeCache(h,y);if(0==g.apply(f.callback.beforeDrop,[h.treeId,n,u,z,t],!0))e.selectNodes(B,n);else{var E=t?g.clone(n):n;z==d.move.TYPE_INNER&&g.canAsync(h,u)?e.asyncNode(h,u,!1,a):a()}}else e.selectNodes(B,n),f.treeObj.trigger(d.event.DROP,[b,f.treeId,n,null,null,null])}}function m(){return!1}var k,l,f=p.getSetting(b.data.treeId),G=p.getRoot(f),x=p.getRoots();if(2==b.button||!f.edit.enable||!f.edit.drag.isCopy&&!f.edit.drag.isMove)return!0;var t=b.target,u=p.getRoot(f).curSelectedList,n=[];if(p.isSelectedNode(f,a))for(k=0,l=u.length;k<l;k++){if(u[k].editNameFlag&&g.eqs(t.tagName,"input")&&null!==t.getAttribute("treeNode"+d.id.INPUT))return!0;n.push(u[k]);if(n[0].parentTId!==u[k].parentTId){n=[a];break}}else n=[a];e.editNodeBlur=!0;e.cancelCurEditNode(f);var J=A(f.treeObj.get(0).ownerDocument),Q=A(f.treeObj.get(0).ownerDocument.body),H,F,w,N=!1,h=f,B=f,L,V,X=null,Y=null,y=null,z=d.move.TYPE_INNER,R=b.clientX,S=b.clientY,P=(new Date).getTime();g.uCanDo(f)&&J.bind("mousemove",c);J.bind("mouseup",v);J.bind("selectstart",m);b.preventDefault&&b.preventDefault();return!0}};A.extend(!0,A.fn.zTree.consts,M);A.extend(!0,A.fn.zTree._z,{tools:{getAbs:function(b){b=b.getBoundingClientRect();return[b.left+(document.body.scrollLeft+document.documentElement.scrollLeft),b.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(b){b.get(0)&&(b.focus(),g.setCursorPosition(b.get(0),b.val().length))},inputSelect:function(b){b.get(0)&&(b.focus(),b.select())},setCursorPosition:function(b,a){if(b.setSelectionRange)b.focus(),b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0);c.moveEnd("character",a);c.moveStart("character",a);c.select()}},showIfameMask:function(b,a){for(var c=p.getRoot(b);0<c.dragMaskList.length;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(a)for(var d=r("iframe",b),e=0,k=d.length;e<k;e++){var l=d.get(e),f=g.getAbs(l),l=r("\x3cdiv id\x3d'zTreeMask_"+e+"' class\x3d'zTreeMask' style\x3d'top:"+f[1]+"px; left:"+f[0]+"px; width:"+l.offsetWidth+"px; height:"+l.offsetHeight+"px;'\x3e\x3c/div\x3e",b);l.appendTo(r("body",b));c.dragMaskList.push(l)}}},view:{addEditBtn:function(b,a){if(!(a.editNameFlag||0<r(a,d.id.EDIT,b).length)&&g.apply(b.edit.showRenameBtn,[b.treeId,a],b.edit.showRenameBtn)){var c=r(a,d.id.A,b),v="\x3cspan class\x3d'"+d.className.BUTTON+" edit' id\x3d'"+a.tId+d.id.EDIT+"' title\x3d'"+g.apply(b.edit.renameTitle,[b.treeId,a],b.edit.renameTitle)+"' treeNode"+d.id.EDIT+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(v);r(a,d.id.EDIT,b).bind("click",function(){if(!g.uCanDo(b)||0==g.apply(b.callback.beforeEditName,[b.treeId,a],!0))return!1;e.editNode(b,a);return!1}).show()}},addRemoveBtn:function(b,a){if(!(a.editNameFlag||0<r(a,d.id.REMOVE,b).length)&&g.apply(b.edit.showRemoveBtn,[b.treeId,a],b.edit.showRemoveBtn)){var c=r(a,d.id.A,b),v="\x3cspan class\x3d'"+d.className.BUTTON+" remove' id\x3d'"+a.tId+d.id.REMOVE+"' title\x3d'"+g.apply(b.edit.removeTitle,[b.treeId,a],b.edit.removeTitle)+"' treeNode"+d.id.REMOVE+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(v);r(a,d.id.REMOVE,b).bind("click",function(){if(!g.uCanDo(b)||0==g.apply(b.callback.beforeRemove,[b.treeId,a],!0))return!1;e.removeNode(b,a);b.treeObj.trigger(d.event.REMOVE,[b.treeId,a]);return!1}).bind("mousedown",function(a){return!0}).show()}},addHoverDom:function(b,a){p.getRoots().showHoverDom&&(a.isHover=!0,b.edit.enable&&(e.addEditBtn(b,a),e.addRemoveBtn(b,a)),g.apply(b.view.addHoverDom,[b.treeId,a]))},cancelCurEditNode:function(b,a,c){var v=p.getRoot(b),m=b.data.key.name,k=v.curEditNode;if(k){var l=v.curEditInput;a=a?a:c?k[m]:l.val();if(!1===g.apply(b.callback.beforeRename,[b.treeId,k,a,c],!0))return!1;k[m]=a;r(k,d.id.A,b).removeClass(d.node.CURSELECTED_EDIT);l.unbind();e.setNodeName(b,k);k.editNameFlag=!1;v.curEditNode=null;v.curEditInput=null;e.selectNode(b,k,!1);b.treeObj.trigger(d.event.RENAME,[b.treeId,k,c])}return v.noSelection=!0},editNode:function(b,a){var c=p.getRoot(b);e.editNodeBlur=!1;if(p.isSelectedNode(b,a)&&c.curEditNode==a&&a.editNameFlag)setTimeout(function(){g.inputFocus(c.curEditInput)},0);else{var v=b.data.key.name;a.editNameFlag=!0;e.removeTreeDom(b,a);e.cancelCurEditNode(b);e.selectNode(b,a,!1);r(a,d.id.SPAN,b).html("\x3cinput type\x3dtext class\x3d'rename' id\x3d'"+a.tId+d.id.INPUT+"' treeNode"+d.id.INPUT+" \x3e");var m=r(a,d.id.INPUT,b);m.attr("value",a[v]);b.edit.editNameSelectAll?g.inputSelect(m):g.inputFocus(m);m.bind("blur",function(a){e.editNodeBlur||e.cancelCurEditNode(b)}).bind("keydown",function(a){"13"==a.keyCode?(e.editNodeBlur=!0,e.cancelCurEditNode(b)):"27"==a.keyCode&&e.cancelCurEditNode(b,null,!0)}).bind("click",function(a){return!1}).bind("dblclick",function(a){return!1});r(a,d.id.A,b).addClass(d.node.CURSELECTED_EDIT);c.curEditInput=m;c.noSelection=!1;c.curEditNode=a}},moveNode:function(b,a,c,v,m,k){var l=p.getRoot(b),f=b.data.key.children;if(a!=c&&(!b.data.keep.leaf||!a||a.isParent||v!=d.move.TYPE_INNER)){var g=c.parentTId?c.getParentNode():l,x=null===a||a==l;x&&null===a&&(a=l);x&&(v=d.move.TYPE_INNER);l=a.parentTId?a.getParentNode():l;v!=d.move.TYPE_PREV&&v!=d.move.TYPE_NEXT&&(v=d.move.TYPE_INNER);v==d.move.TYPE_INNER&&(x?c.parentTId=null:(a.isParent||(a.isParent=!0,a.open=!!a.open,e.setNodeLineIcos(b,a)),c.parentTId=a.tId));var t;x?t=x=b.treeObj:(k||v!=d.move.TYPE_INNER?k||e.expandCollapseNode(b,a.getParentNode(),!0,!1):e.expandCollapseNode(b,a,!0,!1),x=r(a,b),t=r(a,d.id.UL,b),x.get(0)&&!t.get(0)&&(t=[],e.makeUlHtml(b,a,t,""),x.append(t.join(""))),t=r(a,d.id.UL,b));var u=r(c,b);u.get(0)?x.get(0)||u.remove():u=e.appendNodes(b,c.level,[c],null,!1,!0).join("");t.get(0)&&v==d.move.TYPE_INNER?t.append(u):x.get(0)&&v==d.move.TYPE_PREV?x.before(u):x.get(0)&&v==d.move.TYPE_NEXT&&x.after(u);var n=-1,A=0,B=null,x=null,H=c.level;if(c.isFirstNode)n=0,1<g[f].length&&(B=g[f][1],B.isFirstNode=!0);else if(c.isLastNode)n=g[f].length-1,B=g[f][n-1],B.isLastNode=!0;else for(t=0,u=g[f].length;t<u;t++)if(g[f][t].tId==c.tId){n=t;break}0<=n&&g[f].splice(n,1);if(v!=d.move.TYPE_INNER)for(t=0,u=l[f].length;t<u;t++)l[f][t].tId==a.tId&&(A=t);v==d.move.TYPE_INNER?(a[f]||(a[f]=[]),0<a[f].length&&(x=a[f][a[f].length-1],x.isLastNode=!1),a[f].splice(a[f].length,0,c),c.isLastNode=!0,c.isFirstNode=1==a[f].length):a.isFirstNode&&v==d.move.TYPE_PREV?(l[f].splice(A,0,c),x=a,x.isFirstNode=!1,c.parentTId=a.parentTId,c.isFirstNode=!0,c.isLastNode=!1):a.isLastNode&&v==d.move.TYPE_NEXT?(l[f].splice(A+1,0,c),x=a,x.isLastNode=!1,c.parentTId=a.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(v==d.move.TYPE_PREV?l[f].splice(A,0,c):l[f].splice(A+1,0,c),c.parentTId=a.parentTId,c.isFirstNode=!1,c.isLastNode=!1);p.fixPIdKeyValue(b,c);p.setSonNodeLevel(b,c.getParentNode(),c);e.setNodeLineIcos(b,c);e.repairNodeLevelClass(b,c,H);!b.data.keep.parent&&1>g[f].length?(g.isParent=!1,g.open=!1,a=r(g,d.id.UL,b),v=r(g,d.id.SWITCH,b),f=r(g,d.id.ICON,b),e.replaceSwitchClass(g,v,d.folder.DOCU),e.replaceIcoClass(g,f,d.folder.DOCU),a.css("display","none")):B&&e.setNodeLineIcos(b,B);x&&e.setNodeLineIcos(b,x);b.check&&b.check.enable&&e.repairChkClass&&(e.repairChkClass(b,g),e.repairParentChkClassWithSelf(b,g),g!=c.parent&&e.repairParentChkClassWithSelf(b,c));k||e.expandCollapseParentNode(b,c.getParentNode(),!0,m)}},removeEditBtn:function(b,a){r(a,d.id.EDIT,b).unbind().remove()},removeRemoveBtn:function(b,a){r(a,d.id.REMOVE,b).unbind().remove()},removeTreeDom:function(b,a){a.isHover=!1;e.removeEditBtn(b,a);e.removeRemoveBtn(b,a);g.apply(b.view.removeHoverDom,[b.treeId,a])},repairNodeLevelClass:function(b,a,c){if(c!==a.level){var e=r(a,b),g=r(a,d.id.A,b);b=r(a,d.id.UL,b);c=d.className.LEVEL+c;a=d.className.LEVEL+a.level;e.removeClass(c);e.addClass(a);g.removeClass(c);g.addClass(a);b.removeClass(c);b.addClass(a)}},selectNodes:function(b,a){for(var c=0,d=a.length;c<d;c++)e.selectNode(b,a[c],0<c)}},event:{},data:{setSonNodeLevel:function(b,a,c){if(c){var d=b.data.key.children;c.level=a?a.level+1:0;if(c[d]){a=0;for(var e=c[d].length;a<e;a++)c[d][a]&&p.setSonNodeLevel(b,c,c[d][a])}}}}});var L=A.fn.zTree,g=L._z.tools,d=L.consts,e=L._z.view,p=L._z.data,r=g.$;p.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}});p.addInitBind(function(b){var a=b.treeObj,c=d.event;a.bind(c.RENAME,function(a,c,d,e){g.apply(b.callback.onRename,[a,c,d,e])});a.bind(c.DRAG,function(a,c,d,e){g.apply(b.callback.onDrag,[c,d,e])});a.bind(c.DRAGMOVE,function(a,c,d,e){g.apply(b.callback.onDragMove,[c,d,e])});a.bind(c.DROP,function(a,c,d,e,f,p,r){g.apply(b.callback.onDrop,[c,d,e,f,p,r])})});p.addInitUnBind(function(b){b=b.treeObj;var a=d.event;b.unbind(a.RENAME);b.unbind(a.DRAG);b.unbind(a.DRAGMOVE);b.unbind(a.DROP)});p.addInitCache(function(b){});p.addInitNode(function(b,a,c,d,e,g,l){c&&(c.isHover=!1,c.editNameFlag=!1)});p.addInitProxy(function(b){var a=b.target,c=p.getSetting(b.data.treeId),e=b.relatedTarget,m="",k=null,l="",f=null,r=null;if(g.eqs(b.type,"mouseover")){if(r=g.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+d.id.A}]))m=g.getNodeMainDom(r).id,l="hoverOverNode"}else g.eqs(b.type,"mouseout")?(r=g.getMDom(c,e,[{tagName:"a",attrName:"treeNode"+d.id.A}]),r||(m="remove",l="hoverOutNode")):g.eqs(b.type,"mousedown")&&(r=g.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+d.id.A}]))&&(m=g.getNodeMainDom(r).id,l="mousedownNode");if(0<m.length)switch(k=p.getNodeCache(c,m),l){case "mousedownNode":f=B.onMousedownNode;break;case "hoverOverNode":f=B.onHoverOverNode;break;case "hoverOutNode":f=B.onHoverOutNode}return{stop:!1,node:k,nodeEventType:l,nodeEventCallback:f,treeEventType:"",treeEventCallback:null}});p.addInitRoot(function(b){b=p.getRoot(b);var a=p.getRoots();b.curEditNode=null;b.curEditInput=null;b.curHoverNode=null;b.dragFlag=0;b.dragNodeShowBefore=[];b.dragMaskList=[];a.showHoverDom=!0});p.addZTreeTools(function(b,a){a.cancelEditName=function(a){p.getRoot(this.setting).curEditNode&&e.cancelCurEditNode(this.setting,a?a:null,!0)};a.copyNode=function(a,b,m,k){if(!b||a&&!a.isParent&&this.setting.data.keep.leaf&&m===d.move.TYPE_INNER)return null;var l=this,f=g.clone(b);a||(a=null,m=d.move.TYPE_INNER);m==d.move.TYPE_INNER?(b=function(){e.addNodes(l.setting,a,[f],k)},g.canAsync(this.setting,a)?e.asyncNode(this.setting,a,k,b):b()):(e.addNodes(this.setting,a.parentNode,[f],k),e.moveNode(this.setting,a,f,m,!1,k));return f};a.editName=function(a){a&&a.tId&&a===p.getNodeCache(this.setting,a.tId)&&(a.parentTId&&e.expandCollapseParentNode(this.setting,a.getParentNode(),!0),e.editNode(this.setting,a))};a.moveNode=function(a,b,m,k){function l(){e.moveNode(f.setting,a,b,m,!1,k)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&m===d.move.TYPE_INNER||a&&(b.parentTId==a.tId&&m==d.move.TYPE_INNER||0<r(b,this.setting).find("#"+a.tId).length))return null;a||(a=null);var f=this;g.canAsync(this.setting,a)&&m===d.move.TYPE_INNER?e.asyncNode(this.setting,a,k,l):l();return b};a.setEditable=function(a){this.setting.edit.enable=a;return this.refresh()}});var R=e.cancelPreSelectedNode;e.cancelPreSelectedNode=function(b,a){for(var c=p.getRoot(b).curSelectedList,d=0,g=c.length;d<g;d++)if(!a||a===c[d])if(e.removeTreeDom(b,c[d]),a)break;R&&R.apply(e,arguments)};var S=e.createNodes;e.createNodes=function(b,a,c,d){S&&S.apply(e,arguments);c&&e.repairParentChkClassWithSelf&&e.repairParentChkClassWithSelf(b,d)};var Z=e.makeNodeUrl;e.makeNodeUrl=function(b,a){return b.edit.enable?null:Z.apply(e,arguments)};var P=e.removeNode;e.removeNode=function(b,a){var c=p.getRoot(b);c.curEditNode===a&&(c.curEditNode=null);P&&P.apply(e,arguments)};var T=e.selectNode;e.selectNode=function(b,a,c){var d=p.getRoot(b);if(p.isSelectedNode(b,a)&&d.curEditNode==a&&a.editNameFlag)return!1;T&&T.apply(e,arguments);e.addHoverDom(b,a);return!0};var U=g.uCanDo;g.uCanDo=function(b,a){var c=p.getRoot(b);if(a&&(g.eqs(a.type,"mouseover")||g.eqs(a.type,"mouseout")||g.eqs(a.type,"mousedown")||g.eqs(a.type,"mouseup")))return!0;c.curEditNode&&(e.editNodeBlur=!1,c.curEditInput.focus());return!c.curEditNode&&(U?U.apply(e,arguments):!0)}})(jQuery);