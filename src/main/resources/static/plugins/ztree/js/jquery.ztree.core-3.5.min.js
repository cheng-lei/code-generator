(function(u){var v={},z={},A={},L={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},B=[function(b){var a=b.treeObj,c=e.event;a.bind(c.NODECREATED,function(a,c,g){l.apply(b.callback.onNodeCreated,[a,c,g])});a.bind(c.CLICK,function(a,c,g,n,h){l.apply(b.callback.onClick,[c,g,n,h])});a.bind(c.EXPAND,function(a,c,g){l.apply(b.callback.onExpand,[a,c,g])});a.bind(c.COLLAPSE,function(a,c,g){l.apply(b.callback.onCollapse,[a,c,g])});a.bind(c.ASYNC_SUCCESS,function(a,c,g,n){l.apply(b.callback.onAsyncSuccess,[a,c,g,n])});a.bind(c.ASYNC_ERROR,function(a,c,g,n,h,e){l.apply(b.callback.onAsyncError,[a,c,g,n,h,e])});a.bind(c.REMOVE,function(a,c,g){l.apply(b.callback.onRemove,[a,c,g])});a.bind(c.SELECTED,function(a,c,g){l.apply(b.callback.onSelected,[c,g])});a.bind(c.UNSELECTED,function(a,c,g){l.apply(b.callback.onUnSelected,[c,g])})}],C=[function(b){var a=e.event;b.treeObj.unbind(a.NODECREATED).unbind(a.CLICK).unbind(a.EXPAND).unbind(a.COLLAPSE).unbind(a.ASYNC_SUCCESS).unbind(a.ASYNC_ERROR).unbind(a.REMOVE).unbind(a.SELECTED).unbind(a.UNSELECTED)}],D=[function(b){var a=h.getCache(b);a||(a={},h.setCache(b,a));a.nodes=[];a.doms=[]}],E=[function(b,a,c,d,f,g,n){if(c){n=h.getRoot(b);var e=b.data.key.children;c.level=a;c.tId=b.treeId+"_"+ ++n.zId;c.parentTId=d?d.tId:null;c.open="string"==typeof c.open?l.eqs(c.open,"true"):!!c.open;c[e]&&0<c[e].length?(c.isParent=!0,c.zAsync=!0):(c.isParent="string"==typeof c.isParent?l.eqs(c.isParent,"true"):!!c.isParent,c.open=c.isParent&&!b.async.enable?c.open:!1,c.zAsync=!c.isParent);c.isFirstNode=f;c.isLastNode=g;c.getParentNode=function(){return h.getNodeCache(b,c.parentTId)};c.getPreNode=function(){return h.getPreNode(b,c)};c.getNextNode=function(){return h.getNextNode(b,c)};c.isAjaxing=!1;h.fixPIdKeyValue(b,c)}}],x=[function(b){var a=b.target,c=h.getSetting(b.data.treeId),d="",f=null,g="",n="",k=null,q=null,m=null;if(l.eqs(b.type,"mousedown"))n="mousedown";else if(l.eqs(b.type,"mouseup"))n="mouseup";else if(l.eqs(b.type,"contextmenu"))n="contextmenu";else if(l.eqs(b.type,"click"))if(l.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+e.id.SWITCH))d=l.getNodeMainDom(a).id,g="switchNode";else{if(m=l.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+e.id.A}]))d=l.getNodeMainDom(m).id,g="clickNode"}else l.eqs(b.type,"dblclick")&&(n="dblclick",m=l.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+e.id.A}]))&&(d=l.getNodeMainDom(m).id,g="switchNode");0<n.length&&0==d.length&&(m=l.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+e.id.A}]))&&(d=l.getNodeMainDom(m).id);if(0<d.length)switch(f=h.getNodeCache(c,d),g){case "switchNode":f.isParent?l.eqs(b.type,"click")||l.eqs(b.type,"dblclick")&&l.apply(c.view.dblClickExpand,[c.treeId,f],c.view.dblClickExpand)?k=w.onSwitchNode:g="":g="";break;case "clickNode":k=w.onClickNode}switch(n){case "mousedown":q=w.onZTreeMousedown;break;case "mouseup":q=w.onZTreeMouseup;break;case "dblclick":q=w.onZTreeDblclick;break;case "contextmenu":q=w.onZTreeContextmenu}return{stop:!1,node:f,nodeEventType:g,nodeEventCallback:k,treeEventType:n,treeEventCallback:q}}],F=[function(b){var a=h.getRoot(b);a||(a={},h.setRoot(b,a));a[b.data.key.children]=[];a.expandTriggerFlag=!1;a.curSelectedList=[];a.noSelection=!0;a.createdNodes=[];a.zId=0;a._ver=(new Date).getTime()}],G=[],H=[],I=[],J=[],K=[],h={addNodeCache:function(b,a){h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=a},getNodeCacheId:function(b){return b.substring(b.lastIndexOf("_")+1)},addAfterA:function(b){H.push(b)},addBeforeA:function(b){G.push(b)},addInnerAfterA:function(b){J.push(b)},addInnerBeforeA:function(b){I.push(b)},addInitBind:function(b){B.push(b)},addInitUnBind:function(b){C.push(b)},addInitCache:function(b){D.push(b)},addInitNode:function(b){E.push(b)},addInitProxy:function(b,a){a?x.splice(0,0,b):x.push(b)},addInitRoot:function(b){F.push(b)},addNodesData:function(b,a,c){var d=b.data.key.children;a[d]||(a[d]=[]);0<a[d].length&&(a[d][a[d].length-1].isLastNode=!1,k.setNodeLineIcos(b,a[d][a[d].length-1]));a.isParent=!0;a[d]=a[d].concat(c)},addSelectedNode:function(b,a){var c=h.getRoot(b);h.isSelectedNode(b,a)||c.curSelectedList.push(a)},addCreatedNode:function(b,a){(b.callback.onNodeCreated||b.view.addDiyDom)&&h.getRoot(b).createdNodes.push(a)},addZTreeTools:function(b){K.push(b)},exSetting:function(b){u.extend(!0,L,b)},fixPIdKeyValue:function(b,a){b.data.simpleData.enable&&(a[b.data.simpleData.pIdKey]=a.parentTId?a.getParentNode()[b.data.simpleData.idKey]:b.data.simpleData.rootPId)},getAfterA:function(b,a,c){for(var d=0,f=H.length;d<f;d++)H[d].apply(this,arguments)},getBeforeA:function(b,a,c){for(var d=0,f=G.length;d<f;d++)G[d].apply(this,arguments)},getInnerAfterA:function(b,a,c){for(var d=0,f=J.length;d<f;d++)J[d].apply(this,arguments)},getInnerBeforeA:function(b,a,c){for(var d=0,f=I.length;d<f;d++)I[d].apply(this,arguments)},getCache:function(b){return A[b.treeId]},getNextNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),f=0,g=d[c].length-1;f<=g;f++)if(d[c][f]===a)return f==g?null:d[c][f+1];return null},getNodeByParam:function(b,a,c,d){if(!a||!c)return null;for(var f=b.data.key.children,g=0,n=a.length;g<n;g++){if(a[g][c]==d)return a[g];var e=h.getNodeByParam(b,a[g][f],c,d);if(e)return e}return null},getNodeCache:function(b,a){if(!a)return null;var c=A[b.treeId].nodes[h.getNodeCacheId(a)];return c?c:null},getNodeName:function(b,a){return""+a[b.data.key.name]},getNodeTitle:function(b,a){return""+a[""===b.data.key.title?b.data.key.name:b.data.key.title]},getNodes:function(b){return h.getRoot(b)[b.data.key.children]},getNodesByParam:function(b,a,c,d){if(!a||!c)return[];for(var f=b.data.key.children,g=[],e=0,k=a.length;e<k;e++)a[e][c]==d&&g.push(a[e]),g=g.concat(h.getNodesByParam(b,a[e][f],c,d));return g},getNodesByParamFuzzy:function(b,a,c,d){if(!a||!c)return[];var f=b.data.key.children,g=[];d=d.toLowerCase();for(var e=0,k=a.length;e<k;e++)"string"==typeof a[e][c]&&-1<a[e][c].toLowerCase().indexOf(d)&&g.push(a[e]),g=g.concat(h.getNodesByParamFuzzy(b,a[e][f],c,d));return g},getNodesByFilter:function(b,a,c,d,f){if(!a)return d?null:[];for(var g=b.data.key.children,e=d?null:[],k=0,q=a.length;k<q;k++){if(l.apply(c,[a[k],f],!1)){if(d)return a[k];e.push(a[k])}var m=h.getNodesByFilter(b,a[k][g],c,d,f);if(d&&m)return m;e=d?m:e.concat(m)}return e},getPreNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),f=0,g=d[c].length;f<g;f++)if(d[c][f]===a)return 0==f?null:d[c][f-1];return null},getRoot:function(b){return b?z[b.treeId]:null},getRoots:function(){return z},getSetting:function(b){return v[b]},getSettings:function(){return v},getZTreeTools:function(b){return(b=this.getRoot(this.getSetting(b)))?b.treeTools:null},initCache:function(b){for(var a=0,c=D.length;a<c;a++)D[a].apply(this,arguments)},initNode:function(b,a,c,d,f,g){for(var e=0,h=E.length;e<h;e++)E[e].apply(this,arguments)},initRoot:function(b){for(var a=0,c=F.length;a<c;a++)F[a].apply(this,arguments)},isSelectedNode:function(b,a){for(var c=h.getRoot(b),d=0,f=c.curSelectedList.length;d<f;d++)if(a===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(b,a){var c=b.data.key.children;if(a[c])for(var d=0,f=a[c].length;d<f;d++)arguments.callee(b,a[c][d]);h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=null},removeSelectedNode:function(b,a){for(var c=h.getRoot(b),d=0,f=c.curSelectedList.length;d<f;d++)a!==c.curSelectedList[d]&&h.getNodeCache(b,c.curSelectedList[d].tId)||(c.curSelectedList.splice(d,1),b.treeObj.trigger(e.event.UNSELECTED,[b.treeId,a]),d--,f--)},setCache:function(b,a){A[b.treeId]=a},setRoot:function(b,a){z[b.treeId]=a},setZTreeTools:function(b,a){for(var c=0,d=K.length;c<d;c++)K[c].apply(this,arguments)},transformToArrayFormat:function(b,a){if(!a)return[];var c=b.data.key.children,d=[];if(l.isArray(a))for(var f=0,g=a.length;f<g;f++)d.push(a[f]),a[f][c]&&(d=d.concat(h.transformToArrayFormat(b,a[f][c])));else d.push(a),a[c]&&(d=d.concat(h.transformToArrayFormat(b,a[c])));return d},transformTozTreeFormat:function(b,a){var c,d,f=b.data.simpleData.idKey,g=b.data.simpleData.pIdKey,e=b.data.key.children;if(!f||""==f||!a)return[];if(l.isArray(a)){var h=[],k=[];c=0;for(d=a.length;c<d;c++)k[a[c][f]]=a[c];c=0;for(d=a.length;c<d;c++)k[a[c][g]]&&a[c][f]!=a[c][g]?(k[a[c][g]][e]||(k[a[c][g]][e]=[]),k[a[c][g]][e].push(a[c])):h.push(a[c]);return h}return[a]}},p={bindEvent:function(b){for(var a=0,c=B.length;a<c;a++)B[a].apply(this,arguments)},unbindEvent:function(b){for(var a=0,c=C.length;a<c;a++)C[a].apply(this,arguments)},bindTree:function(b){var a={treeId:b.treeId},c=b.treeObj;b.view.txtSelectedEnable||c.bind("selectstart",function(a){a=a.originalEvent.srcElement.nodeName.toLowerCase();return"input"===a||"textarea"===a}).css({"-moz-user-select":"-moz-none"});c.bind("click",a,p.proxy);c.bind("dblclick",a,p.proxy);c.bind("mouseover",a,p.proxy);c.bind("mouseout",a,p.proxy);c.bind("mousedown",a,p.proxy);c.bind("mouseup",a,p.proxy);c.bind("contextmenu",a,p.proxy)},unbindTree:function(b){b.treeObj.unbind("click",p.proxy).unbind("dblclick",p.proxy).unbind("mouseover",p.proxy).unbind("mouseout",p.proxy).unbind("mousedown",p.proxy).unbind("mouseup",p.proxy).unbind("contextmenu",p.proxy)},doProxy:function(b){for(var a=[],c=0,d=x.length;c<d;c++){var f=x[c].apply(this,arguments);a.push(f);if(f.stop)break}return a},proxy:function(b){var a=h.getSetting(b.data.treeId);if(!l.uCanDo(a,b))return!0;for(var a=p.doProxy(b),c=!0,d=0,f=a.length;d<f;d++){var g=a[d];g.nodeEventCallback&&(c=g.nodeEventCallback.apply(g,[b,g.node])&&c);g.treeEventCallback&&(c=g.treeEventCallback.apply(g,[b,g.node])&&c)}return c}},w={onSwitchNode:function(b,a){var c=h.getSetting(b.data.treeId);if(a.open){if(0==l.apply(c.callback.beforeCollapse,[c.treeId,a],!0))return!0}else if(0==l.apply(c.callback.beforeExpand,[c.treeId,a],!0))return!0;h.getRoot(c).expandTriggerFlag=!0;k.switchNode(c,a);return!0},onClickNode:function(b,a){var c=h.getSetting(b.data.treeId),d=c.view.autoCancelSelected&&(b.ctrlKey||b.metaKey)&&h.isSelectedNode(c,a)?0:c.view.autoCancelSelected&&(b.ctrlKey||b.metaKey)&&c.view.selectedMulti?2:1;if(0==l.apply(c.callback.beforeClick,[c.treeId,a,d],!0))return!0;0===d?k.cancelPreSelectedNode(c,a):k.selectNode(c,a,2===d);c.treeObj.trigger(e.event.CLICK,[b,c.treeId,a,d]);return!0},onZTreeMousedown:function(b,a){var c=h.getSetting(b.data.treeId);l.apply(c.callback.beforeMouseDown,[c.treeId,a],!0)&&l.apply(c.callback.onMouseDown,[b,c.treeId,a]);return!0},onZTreeMouseup:function(b,a){var c=h.getSetting(b.data.treeId);l.apply(c.callback.beforeMouseUp,[c.treeId,a],!0)&&l.apply(c.callback.onMouseUp,[b,c.treeId,a]);return!0},onZTreeDblclick:function(b,a){var c=h.getSetting(b.data.treeId);l.apply(c.callback.beforeDblClick,[c.treeId,a],!0)&&l.apply(c.callback.onDblClick,[b,c.treeId,a]);return!0},onZTreeContextmenu:function(b,a){var c=h.getSetting(b.data.treeId);l.apply(c.callback.beforeRightClick,[c.treeId,a],!0)&&l.apply(c.callback.onRightClick,[b,c.treeId,a]);return"function"!=typeof c.callback.onRightClick}},l={apply:function(b,a,c){return"function"==typeof b?b.apply(M,a?a:[]):c},canAsync:function(b,a){var c=b.data.key.children;return b.async.enable&&a&&a.isParent&&!(a.zAsync||a[c]&&0<a[c].length)},clone:function(b){if(null===b)return null;var a=l.isArray(b)?[]:{},c;for(c in b)a[c]=b[c]instanceof Date?new Date(b[c].getTime()):"object"===typeof b[c]?arguments.callee(b[c]):b[c];return a},eqs:function(b,a){return b.toLowerCase()===a.toLowerCase()},isArray:function(b){return"[object Array]"===Object.prototype.toString.apply(b)},$:function(b,a,c){a&&"string"!=typeof a&&(c=a,a="");return"string"==typeof b?u(b,c?c.treeObj.get(0).ownerDocument:null):u("#"+b.tId+a,c?c.treeObj:null)},getMDom:function(b,a,c){if(!a)return null;for(;a&&a.id!==b.treeId;){for(var d=0,f=c.length;a.tagName&&d<f;d++)if(l.eqs(a.tagName,c[d].tagName)&&null!==a.getAttribute(c[d].attrName))return a;a=a.parentNode}return null},getNodeMainDom:function(b){return u(b).parent("li").get(0)||u(b).parentsUntil("li").parent().get(0)},isChildOrSelf:function(b,a){return 0<u(b).closest("#"+a).length},uCanDo:function(b,a){return!0}},k={addNodes:function(b,a,c,d){if(!b.data.keep.leaf||!a||a.isParent)if(l.isArray(c)||(c=[c]),b.data.simpleData.enable&&(c=h.transformTozTreeFormat(b,c)),a){var f=m(a,e.id.SWITCH,b),g=m(a,e.id.ICON,b),n=m(a,e.id.UL,b);a.open||(k.replaceSwitchClass(a,f,e.folder.CLOSE),k.replaceIcoClass(a,g,e.folder.CLOSE),a.open=!1,n.css({display:"none"}));h.addNodesData(b,a,c);k.createNodes(b,a.level+1,c,a);d||k.expandCollapseParentNode(b,a,!0)}else h.addNodesData(b,h.getRoot(b),c),k.createNodes(b,0,c,null)},appendNodes:function(b,a,c,d,f,g){if(!c)return[];for(var e=[],l=b.data.key.children,m=0,p=c.length;m<p;m++){var r=c[m];if(f){var y=(d?d:h.getRoot(b))[l].length==c.length&&0==m;h.initNode(b,a,r,d,y,m==c.length-1,g);h.addNodeCache(b,r)}y=[];r[l]&&0<r[l].length&&(y=k.appendNodes(b,a+1,r[l],r,f,g&&r.open));g&&(k.makeDOMNodeMainBefore(e,b,r),k.makeDOMNodeLine(e,b,r),h.getBeforeA(b,r,e),k.makeDOMNodeNameBefore(e,b,r),h.getInnerBeforeA(b,r,e),k.makeDOMNodeIcon(e,b,r),h.getInnerAfterA(b,r,e),k.makeDOMNodeNameAfter(e,b,r),h.getAfterA(b,r,e),r.isParent&&r.open&&k.makeUlHtml(b,r,e,y.join("")),k.makeDOMNodeMainAfter(e,b,r),h.addCreatedNode(b,r))}return e},appendParentULDom:function(b,a){var c=[],d=m(a,b);!d.get(0)&&a.parentTId&&(k.appendParentULDom(b,a.getParentNode()),d=m(a,b));var f=m(a,e.id.UL,b);f.get(0)&&f.remove();f=k.appendNodes(b,a.level+1,a[b.data.key.children],a,!1,!0);k.makeUlHtml(b,a,c,f.join(""));d.append(c.join(""))},asyncNode:function(b,a,c,d){var f,g;if(a&&!a.isParent)return l.apply(d),!1;if(a&&a.isAjaxing)return!1;if(0==l.apply(b.callback.beforeAsync,[b.treeId,a],!0))return l.apply(d),!1;a&&(a.isAjaxing=!0,m(a,e.id.ICON,b).attr({style:"","class":e.className.BUTTON+" "+e.className.ICO_LOADING}));var n={};f=0;for(g=b.async.autoParam.length;a&&f<g;f++){var t=b.async.autoParam[f].split("\x3d"),q=t;1<t.length&&(q=t[1],t=t[0]);n[q]=a[t]}if(l.isArray(b.async.otherParam))for(f=0,g=b.async.otherParam.length;f<g;f+=2)n[b.async.otherParam[f]]=b.async.otherParam[f+1];else for(var p in b.async.otherParam)n[p]=b.async.otherParam[p];var r=h.getRoot(b)._ver;u.ajax({contentType:b.async.contentType,cache:!1,type:b.async.type,url:l.apply(b.async.url,[b.treeId,a],b.async.url),data:n,dataType:b.async.dataType,success:function(f){if(r==h.getRoot(b)._ver){var g=[];try{g=f&&0!=f.length?"string"==typeof f?eval("("+f+")"):f:[]}catch(n){g=f}a&&(a.isAjaxing=null,a.zAsync=!0);k.setNodeLineIcos(b,a);g&&""!==g?(g=l.apply(b.async.dataFilter,[b.treeId,a,g],g),k.addNodes(b,a,g?l.clone(g):[],!!c)):k.addNodes(b,a,[],!!c);b.treeObj.trigger(e.event.ASYNC_SUCCESS,[b.treeId,a,f]);l.apply(d)}},error:function(c,d,f){r==h.getRoot(b)._ver&&(a&&(a.isAjaxing=null),k.setNodeLineIcos(b,a),b.treeObj.trigger(e.event.ASYNC_ERROR,[b.treeId,a,c,d,f]))}});return!0},cancelPreSelectedNode:function(b,a,c){var d=h.getRoot(b).curSelectedList,f,g;for(f=d.length-1;0<=f;f--)if(g=d[f],a===g||!(a||c&&c===g))if(m(g,e.id.A,b).removeClass(e.node.CURSELECTED),a){h.removeSelectedNode(b,a);break}else d.splice(f,1),b.treeObj.trigger(e.event.UNSELECTED,[b.treeId,g])},createNodeCallback:function(b){if(b.callback.onNodeCreated||b.view.addDiyDom)for(var a=h.getRoot(b);0<a.createdNodes.length;){var c=a.createdNodes.shift();l.apply(b.view.addDiyDom,[b.treeId,c]);b.callback.onNodeCreated&&b.treeObj.trigger(e.event.NODECREATED,[b.treeId,c])}},createNodes:function(b,a,c,d){if(c&&0!=c.length){var f=h.getRoot(b),g=b.data.key.children,g=!d||d.open||!!m(d[g][0],b).get(0);f.createdNodes=[];a=k.appendNodes(b,a,c,d,!0,g);d?(d=m(d,e.id.UL,b),d.get(0)&&d.append(a.join(""))):b.treeObj.append(a.join(""));k.createNodeCallback(b)}},destroy:function(b){b&&(h.initCache(b),h.initRoot(b),p.unbindTree(b),p.unbindEvent(b),b.treeObj.empty(),delete v[b.treeId])},expandCollapseNode:function(b,a,c,d,f){var g=h.getRoot(b),n=b.data.key.children;if(a){if(g.expandTriggerFlag){var t=f;f=function(){t&&t();a.open?b.treeObj.trigger(e.event.EXPAND,[b.treeId,a]):b.treeObj.trigger(e.event.COLLAPSE,[b.treeId,a])};g.expandTriggerFlag=!1}!a.open&&a.isParent&&(!m(a,e.id.UL,b).get(0)||a[n]&&0<a[n].length&&!m(a[n][0],b).get(0))&&(k.appendParentULDom(b,a),k.createNodeCallback(b));if(a.open==c)l.apply(f,[]);else{c=m(a,e.id.UL,b);var g=m(a,e.id.SWITCH,b),q=m(a,e.id.ICON,b);a.isParent?(a.open=!a.open,a.iconOpen&&a.iconClose&&q.attr("style",k.makeNodeIcoStyle(b,a)),a.open?(k.replaceSwitchClass(a,g,e.folder.OPEN),k.replaceIcoClass(a,q,e.folder.OPEN),0==d||""==b.view.expandSpeed?(c.show(),l.apply(f,[])):a[n]&&0<a[n].length?c.slideDown(b.view.expandSpeed,f):(c.show(),l.apply(f,[]))):(k.replaceSwitchClass(a,g,e.folder.CLOSE),k.replaceIcoClass(a,q,e.folder.CLOSE),0!=d&&""!=b.view.expandSpeed&&a[n]&&0<a[n].length?c.slideUp(b.view.expandSpeed,f):(c.hide(),l.apply(f,[])))):l.apply(f,[])}}else l.apply(f,[])},expandCollapseParentNode:function(b,a,c,d,f){a&&(a.parentTId?(k.expandCollapseNode(b,a,c,d),a.parentTId&&k.expandCollapseParentNode(b,a.getParentNode(),c,d,f)):k.expandCollapseNode(b,a,c,d,f))},expandCollapseSonNode:function(b,a,c,d,f){var g=h.getRoot(b),e=b.data.key.children,g=a?a[e]:g[e],e=a?!1:d,l=h.getRoot(b).expandTriggerFlag;h.getRoot(b).expandTriggerFlag=!1;if(g)for(var m=0,p=g.length;m<p;m++)g[m]&&k.expandCollapseSonNode(b,g[m],c,e);h.getRoot(b).expandTriggerFlag=l;k.expandCollapseNode(b,a,c,d,f)},isSelectedNode:function(b,a){if(!a)return!1;var c=h.getRoot(b).curSelectedList,d;for(d=c.length-1;0<=d;d--)if(a===c[d])return!0;return!1},makeDOMNodeIcon:function(b,a,c){var d=h.getNodeName(a,c),d=a.view.nameIsHTML?d:d.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");b.push("\x3cspan id\x3d'",c.tId,e.id.ICON,"' title\x3d'' treeNode",e.id.ICON," class\x3d'",k.makeNodeIcoClass(a,c),"' style\x3d'",k.makeNodeIcoStyle(a,c),"'\x3e\x3c/span\x3e\x3cspan id\x3d'",c.tId,e.id.SPAN,"'\x3e",d,"\x3c/span\x3e")},makeDOMNodeLine:function(b,a,c){b.push("\x3cspan id\x3d'",c.tId,e.id.SWITCH,"' title\x3d'' class\x3d'",k.makeNodeLineClass(a,c),"' treeNode",e.id.SWITCH,"\x3e\x3c/span\x3e")},makeDOMNodeMainAfter:function(b,a,c){b.push("\x3c/li\x3e")},makeDOMNodeMainBefore:function(b,a,c){b.push("\x3cli id\x3d'",c.tId,"' class\x3d'",e.className.LEVEL,c.level,"' tabindex\x3d'0' hidefocus\x3d'true' treenode\x3e")},makeDOMNodeNameAfter:function(b,a,c){b.push("\x3c/a\x3e")},makeDOMNodeNameBefore:function(b,a,c){h.getNodeTitle(a,c);var d=k.makeNodeUrl(a,c);a=k.makeNodeFontCss(a,c);var f=[],g;for(g in a)f.push(g,":",a[g],";");b.push("\x3ca id\x3d'",c.tId,e.id.A,"' class\x3d'",e.className.LEVEL,c.level,"' treeNode",e.id.A,' onclick\x3d"',c.click||"",'" ',null!=d&&0<d.length?"href\x3d'"+d+"'":""," target\x3d'",k.makeNodeTarget(c),"' style\x3d'",f.join(""),"'");b.push("\x3e")},makeNodeFontCss:function(b,a){var c=l.apply(b.view.fontCss,[b.treeId,a],b.view.fontCss);return c&&"function"!=typeof c?c:{}},makeNodeIcoClass:function(b,a){var c=["ico"];a.isAjaxing||(c[0]=(a.iconSkin?a.iconSkin+"_":"")+c[0],a.isParent?c.push(a.open?e.folder.OPEN:e.folder.CLOSE):c.push(e.folder.DOCU));return e.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(b,a){var c=[];if(!a.isAjaxing){var d=a.isParent&&a.iconOpen&&a.iconClose?a.open?a.iconOpen:a.iconClose:a[b.data.key.icon];d&&c.push("background:url(",d,") 0 0 no-repeat;background-size: 16px;");0!=b.view.showIcon&&l.apply(b.view.showIcon,[b.treeId,a],!0)||c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(b,a){var c=[];b.view.showLine?0==a.level&&a.isFirstNode&&a.isLastNode?c.push(e.line.ROOT):0==a.level&&a.isFirstNode?c.push(e.line.ROOTS):a.isLastNode?c.push(e.line.BOTTOM):c.push(e.line.CENTER):c.push(e.line.NOLINE);a.isParent?c.push(a.open?e.folder.OPEN:e.folder.CLOSE):c.push(e.folder.DOCU);return k.makeNodeLineClassEx(a)+c.join("_")},makeNodeLineClassEx:function(b){return e.className.BUTTON+" "+e.className.LEVEL+b.level+" "+e.className.SWITCH+" "},makeNodeTarget:function(b){return b.target||"_blank"},makeNodeUrl:function(b,a){var c=b.data.key.url;return a[c]?a[c]:null},makeUlHtml:function(b,a,c,d){c.push("\x3cul id\x3d'",a.tId,e.id.UL,"' class\x3d'",e.className.LEVEL,a.level," ",k.makeUlLineClass(b,a),"' style\x3d'display:",a.open?"block":"none","'\x3e");c.push(d);c.push("\x3c/ul\x3e")},makeUlLineClass:function(b,a){return b.view.showLine&&!a.isLastNode?e.line.LINE:""},removeChildNodes:function(b,a){if(a){var c=b.data.key.children,d=a[c];if(d){for(var f=0,g=d.length;f<g;f++)h.removeNodeCache(b,d[f]);h.removeSelectedNode(b);delete a[c];b.data.keep.parent?m(a,e.id.UL,b).empty():(a.isParent=!1,a.open=!1,c=m(a,e.id.SWITCH,b),d=m(a,e.id.ICON,b),k.replaceSwitchClass(a,c,e.folder.DOCU),k.replaceIcoClass(a,d,e.folder.DOCU),m(a,e.id.UL,b).remove())}}},setFirstNode:function(b,a){var c=b.data.key.children;0<a[c].length&&(a[c][0].isFirstNode=!0)},setLastNode:function(b,a){var c=b.data.key.children,d=a[c].length;0<d&&(a[c][d-1].isLastNode=!0)},removeNode:function(b,a){var c=h.getRoot(b),d=b.data.key.children,f=a.parentTId?a.getParentNode():c;a.isFirstNode=!1;a.isLastNode=!1;a.getPreNode=function(){return null};a.getNextNode=function(){return null};if(h.getNodeCache(b,a.tId)){m(a,b).remove();h.removeNodeCache(b,a);h.removeSelectedNode(b,a);for(var g=0,l=f[d].length;g<l;g++)if(f[d][g].tId==a.tId){f[d].splice(g,1);break}k.setFirstNode(b,f);k.setLastNode(b,f);var t,g=f[d].length;if(!b.data.keep.parent&&0==g)f.isParent=!1,f.open=!1,g=m(f,e.id.UL,b),l=m(f,e.id.SWITCH,b),t=m(f,e.id.ICON,b),k.replaceSwitchClass(f,l,e.folder.DOCU),k.replaceIcoClass(f,t,e.folder.DOCU),g.css("display","none");else if(b.view.showLine&&0<g){var q=f[d][g-1],g=m(q,e.id.UL,b),l=m(q,e.id.SWITCH,b);t=m(q,e.id.ICON,b);f==c?1==f[d].length?k.replaceSwitchClass(q,l,e.line.ROOT):(c=m(f[d][0],e.id.SWITCH,b),k.replaceSwitchClass(f[d][0],c,e.line.ROOTS),k.replaceSwitchClass(q,l,e.line.BOTTOM)):k.replaceSwitchClass(q,l,e.line.BOTTOM);g.removeClass(e.line.LINE)}}},replaceIcoClass:function(b,a,c){if(a&&!b.isAjaxing&&(b=a.attr("class"),void 0!=b)){b=b.split("_");switch(c){case e.folder.OPEN:case e.folder.CLOSE:case e.folder.DOCU:b[b.length-1]=c}a.attr("class",b.join("_"))}},replaceSwitchClass:function(b,a,c){if(a){var d=a.attr("class");if(void 0!=d){d=d.split("_");switch(c){case e.line.ROOT:case e.line.ROOTS:case e.line.CENTER:case e.line.BOTTOM:case e.line.NOLINE:d[0]=k.makeNodeLineClassEx(b)+c;break;case e.folder.OPEN:case e.folder.CLOSE:case e.folder.DOCU:d[1]=c}a.attr("class",d.join("_"));c!==e.folder.DOCU?a.removeAttr("disabled"):a.attr("disabled","disabled")}}},selectNode:function(b,a,c){c||k.cancelPreSelectedNode(b,null,a);m(a,e.id.A,b).addClass(e.node.CURSELECTED);h.addSelectedNode(b,a);b.treeObj.trigger(e.event.SELECTED,[b.treeId,a])},setNodeFontCss:function(b,a){var c=m(a,e.id.A,b),d=k.makeNodeFontCss(b,a);d&&c.css(d)},setNodeLineIcos:function(b,a){if(a){var c=m(a,e.id.SWITCH,b),d=m(a,e.id.UL,b),f=m(a,e.id.ICON,b),g=k.makeUlLineClass(b,a);0==g.length?d.removeClass(e.line.LINE):d.addClass(g);c.attr("class",k.makeNodeLineClass(b,a));a.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled");f.removeAttr("style");f.attr("style",k.makeNodeIcoStyle(b,a));f.attr("class",k.makeNodeIcoClass(b,a))}},setNodeName:function(b,a){var c=h.getNodeTitle(b,a),d=m(a,e.id.SPAN,b);d.empty();b.view.nameIsHTML?d.html(h.getNodeName(b,a)):d.text(h.getNodeName(b,a));l.apply(b.view.showTitle,[b.treeId,a],b.view.showTitle)&&m(a,e.id.A,b).attr("title",c?c:"")},setNodeTarget:function(b,a){m(a,e.id.A,b).attr("target",k.makeNodeTarget(a))},setNodeUrl:function(b,a){var c=m(a,e.id.A,b),d=k.makeNodeUrl(b,a);null==d||0==d.length?c.removeAttr("href"):c.attr("href",d)},switchNode:function(b,a){a.open||!l.canAsync(b,a)?k.expandCollapseNode(b,a,!a.open):b.async.enable?k.asyncNode(b,a)||k.expandCollapseNode(b,a,!a.open):a&&k.expandCollapseNode(b,a,!a.open)}};u.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:l,view:k,event:p,data:h},getZTreeObj:function(b){return(b=h.getZTreeTools(b))?b:null},destroy:function(b){if(b&&0<b.length)k.destroy(h.getSetting(b));else for(var a in v)k.destroy(v[a])},init:function(b,a,c){var d=l.clone(L);u.extend(!0,d,a);d.treeId=b.attr("id");d.treeObj=b;d.treeObj.empty();v[d.treeId]=d;"undefined"===typeof document.body.style.maxHeight&&(d.view.expandSpeed="");h.initRoot(d);b=h.getRoot(d);a=d.data.key.children;c=c?l.clone(l.isArray(c)?c:[c]):[];b[a]=d.data.simpleData.enable?h.transformTozTreeFormat(d,c):c;h.initCache(d);p.unbindTree(d);p.bindTree(d);p.unbindEvent(d);p.bindEvent(d);c={setting:d,addNodes:function(a,b,c){function e(){k.addNodes(d,a,h,1==c)}if(!b)return null;a||(a=null);if(a&&!a.isParent&&d.data.keep.leaf)return null;var h=l.clone(l.isArray(b)?b:[b]);l.canAsync(d,a)?k.asyncNode(d,a,c,e):e();return h},cancelSelectedNode:function(a){k.cancelPreSelectedNode(d,a)},destroy:function(){k.destroy(d)},expandAll:function(a){a=!!a;k.expandCollapseSonNode(d,null,a,!0);return a},expandNode:function(a,b,c,e,q){if(!a||!a.isParent)return null;!0!==b&&!1!==b&&(b=!a.open);if((q=!!q)&&b&&0==l.apply(d.callback.beforeExpand,[d.treeId,a],!0)||q&&!b&&0==l.apply(d.callback.beforeCollapse,[d.treeId,a],!0))return null;b&&a.parentTId&&k.expandCollapseParentNode(d,a.getParentNode(),b,!1);if(b===a.open&&!c)return null;h.getRoot(d).expandTriggerFlag=q;if(!l.canAsync(d,a)&&c)k.expandCollapseSonNode(d,a,b,!0,function(){if(!1!==e)try{m(a,d).focus().blur()}catch(b){}});else if(a.open=!b,k.switchNode(this.setting,a),!1!==e)try{m(a,d).focus().blur()}catch(p){}return b},getNodes:function(){return h.getNodes(d)},getNodeByParam:function(a,b,c){return a?h.getNodeByParam(d,c?c[d.data.key.children]:h.getNodes(d),a,b):null},getNodeByTId:function(a){return h.getNodeCache(d,a)},getNodesByParam:function(a,b,c){return a?h.getNodesByParam(d,c?c[d.data.key.children]:h.getNodes(d),a,b):null},getNodesByParamFuzzy:function(a,b,c){return a?h.getNodesByParamFuzzy(d,c?c[d.data.key.children]:h.getNodes(d),a,b):null},getNodesByFilter:function(a,b,c,e){b=!!b;return a&&"function"==typeof a?h.getNodesByFilter(d,c?c[d.data.key.children]:h.getNodes(d),a,b,e):b?null:[]},getNodeIndex:function(a){if(!a)return null;for(var b=d.data.key.children,c=a.parentTId?a.getParentNode():h.getRoot(d),e=0,k=c[b].length;e<k;e++)if(c[b][e]==a)return e;return-1},getSelectedNodes:function(){for(var a=[],b=h.getRoot(d).curSelectedList,c=0,e=b.length;c<e;c++)a.push(b[c]);return a},isSelectedNode:function(a){return h.isSelectedNode(d,a)},reAsyncChildNodes:function(a,b,c){if(this.setting.async.enable){var l=!a;l&&(a=h.getRoot(d));if("refresh"==b){b=this.setting.data.key.children;for(var p=0,u=a[b]?a[b].length:0;p<u;p++)h.removeNodeCache(d,a[b][p]);h.removeSelectedNode(d);a[b]=[];l?this.setting.treeObj.empty():m(a,e.id.UL,d).empty()}k.asyncNode(this.setting,l?null:a,!!c)}},refresh:function(){this.setting.treeObj.empty();var a=h.getRoot(d),b=a[d.data.key.children];h.initRoot(d);a[d.data.key.children]=b;h.initCache(d);k.createNodes(d,0,a[d.data.key.children])},removeChildNodes:function(a){if(!a)return null;var b=a[d.data.key.children];k.removeChildNodes(d,a);return b?b:null},removeNode:function(a,b){a&&(b=!!b,b&&0==l.apply(d.callback.beforeRemove,[d.treeId,a],!0)||(k.removeNode(d,a),b&&this.setting.treeObj.trigger(e.event.REMOVE,[d.treeId,a])))},selectNode:function(a,b){if(a&&l.uCanDo(d)){b=d.view.selectedMulti&&b;if(a.parentTId)k.expandCollapseParentNode(d,a.getParentNode(),!0,!1,function(){try{m(a,d).focus().blur()}catch(b){}});else try{m(a,d).focus().blur()}catch(c){}k.selectNode(d,a,b)}},transformTozTreeNodes:function(a){return h.transformTozTreeFormat(d,a)},transformToArray:function(a){return h.transformToArrayFormat(d,a)},updateNode:function(a,b){a&&m(a,d).get(0)&&l.uCanDo(d)&&(k.setNodeName(d,a),k.setNodeTarget(d,a),k.setNodeUrl(d,a),k.setNodeLineIcos(d,a),k.setNodeFontCss(d,a))}};b.treeTools=c;h.setZTreeTools(d,c);b[a]&&0<b[a].length?k.createNodes(d,0,b[a]):d.async.enable&&d.async.url&&""!==d.async.url&&k.asyncNode(d);return c}};var M=u.fn.zTree,m=l.$,e=M.consts})(jQuery);